<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Daniel J. Harvey - Typeclasses - Semigroup</title>
    <link rel="stylesheet" href="../css/default.css" />
</head>

<body>
    <header>
        <div class="logo">
            <a href="../">Daniel J. Harvey</a>
        </div>
        <nav>
            <a href="../">Home</a>
            <a href="../about.html">About</a>
            <a href="../contact.html">Contact</a>
            <a href="../archive.html">Archive</a>
        </nav>
    </header>

    <main role="main">
        <h1>Typeclasses - Semigroup</h1>
        <article>
    <section class="header">
        Posted on November 11, 2018
        
    </section>
    <section>
        <p>Let’s think about things that can be put together.</p>
<p>Here’s two lists, combined into one big list.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" title="1"><span class="ot">list ::</span> [<span class="dt">Int</span>]</a>
<a class="sourceLine" id="cb1-2" title="2">list <span class="fu">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>] <span class="fu">++</span> [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">-- list == [1,2,3,4,5,6]</span></a></code></pre></div>
<p>Great!</p>
<p>What about two strings combined into one large excellent string?</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" title="1"><span class="ot">string ::</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb2-2" title="2">string <span class="fu">=</span> <span class="st">&quot;Great&quot;</span> <span class="fu">++</span> <span class="st">&quot; Stuff&quot;</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">-- string == &quot;Great Stuff&quot;</span></a></code></pre></div>
<p>Sure! Seems great. So what’s <code>Semigroup</code> got to do with this? <code>Semigroup</code> is the generalisation of combining things together. How is it defined?</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb3-1" title="1"><span class="dt">Prelude</span><span class="fu">&gt;</span> <span class="fu">:</span>i <span class="dt">Semigroup</span></a></code></pre></div>
<p>…gets us…</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">class</span> <span class="dt">Semigroup</span> a <span class="kw">where</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="ot">  (&lt;&gt;) ::</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a</a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="ot">{-# MINIMAL (&lt;&gt;) #-}</span></a></code></pre></div>
<p>So by the looks we can just define it with the <code>&lt;&gt;</code> function.</p>
<p>Therefore we could write our string concat function as <code>&quot;Great&quot; &lt;&gt; &quot;Job&quot;</code> or combine lists like <code>[1,2,3] &lt;&gt; [4,5,6]</code>.</p>
<p>It doesn’t just involve putting sets of things together. They can also apply to the behaviour of numbers. Integers, for instance, can form several Monoids. One is addition. Let’s build a newtype so that we can make a <code>Semigroup</code> instance.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">newtype</span> <span class="dt">MySum</span> a <span class="fu">=</span> <span class="dt">MySum</span> {</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="ot">    getMySum ::</span> a</a>
<a class="sourceLine" id="cb5-3" title="3">}</a></code></pre></div>
<p>Here is a <code>Semigroup</code> instance, it uses pattern matching to take the original values out, adds them together, them wraps them in another <code>MySum</code> instance.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">instance</span> (<span class="dt">Num</span> a) <span class="ot">=&gt;</span> <span class="dt">Semigroup</span> (<span class="dt">MySum</span> a) <span class="kw">where</span></a>
<a class="sourceLine" id="cb6-2" title="2">    <span class="dt">MySum</span> a <span class="fu">&lt;&gt;</span> <span class="dt">MySum</span> b <span class="fu">=</span> <span class="dt">MySum</span> (a <span class="fu">+</span> b)</a></code></pre></div>
<p>We can create several <code>MySum</code> instances, and then combine them together with <code>&lt;&gt;</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb7-1" title="1"><span class="ot">ten ::</span> <span class="dt">MySum</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb7-2" title="2">ten <span class="fu">=</span> <span class="dt">MySum</span> <span class="dv">1</span> <span class="fu">&lt;&gt;</span> <span class="dt">MySum</span> <span class="dv">7</span> <span class="fu">&lt;&gt;</span> <span class="dt">MySum</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">-- ten == MySum 10</span></a></code></pre></div>
<p>Or we could use the <code>getMySum</code> function in the newtype to unwrap it.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb8-1" title="1"><span class="ot">anotherTen ::</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb8-2" title="2">anotherTen <span class="fu">=</span> getMySum <span class="fu">$</span> <span class="dt">MySum</span> <span class="dv">1</span> <span class="fu">&lt;&gt;</span> <span class="dt">MySum</span> <span class="dv">7</span> <span class="fu">&lt;&gt;</span> <span class="dt">MySum</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co">-- anotherTen == 10</span></a></code></pre></div>
<p>This is obviously a fairly over-complicated way to add numbers together, but bear with me here.</p>
<p>Or we do the same for multiplication.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">newtype</span> <span class="dt">MyProd</span> a <span class="fu">=</span> <span class="dt">MyProd</span> {</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="ot">    getMyProd ::</span> a</a>
<a class="sourceLine" id="cb9-3" title="3">}</a></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">instance</span> (<span class="dt">Num</span> a) <span class="ot">=&gt;</span> <span class="dt">Semigroup</span> (<span class="dt">MyProd</span> a) <span class="kw">where</span></a>
<a class="sourceLine" id="cb10-2" title="2">    <span class="dt">MyProd</span> a <span class="fu">&lt;&gt;</span> <span class="dt">MyProd</span> b <span class="fu">=</span> <span class="dt">MyProd</span> (a <span class="fu">*</span> b)</a></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb11-1" title="1"><span class="ot">sixtySix ::</span> <span class="dt">Prod</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb11-2" title="2">sixtySix <span class="fu">=</span> <span class="dt">MyProd</span> <span class="dv">11</span> <span class="fu">&lt;&gt;</span> <span class="dt">MyProd</span> <span class="dv">2</span> <span class="fu">&lt;&gt;</span> <span class="dt">MyProd</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="co">-- sixtySix = Prod 66</span></a></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb12-1" title="1"><span class="ot">anotherSixtySix ::</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb12-2" title="2">anotherSixtySix <span class="fu">=</span> getMyProd <span class="fu">$</span> <span class="dt">MyProd</span> <span class="dv">11</span> <span class="fu">&lt;&gt;</span> <span class="dt">MyProd</span> <span class="dv">2</span> <span class="fu">&lt;&gt;</span> <span class="dt">MyProd</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="co">-- anotherSixtySix = 66</span></a></code></pre></div>
    </section>
</article>
    </main>

    <footer>
        Site proudly generated by
        <a href="http://jaspervdj.be/hakyll">Hakyll</a>
    </footer>
</body>

</html>